 * Serving Flask app 'app'
 * Debug mode: off
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8182
 * Running on http://10.69.127.29:8182
Press CTRL+C to quit
DEBUG: Running Password OPA: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmplwwocunu.json', '{ "reasons": data.policies.security.password.deny, "trace": data.policies.common.inheritance.explain_config("password") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:57:10] "POST /api/test/password HTTP/1.1" 200 -
127.0.0.1 - - [11/Dec/2025 16:58:04] "GET /org/Org_1 HTTP/1.1" 200 -
127.0.0.1 - - [11/Dec/2025 16:58:04] "GET /static/style.css HTTP/1.1" 304 -
DEBUG: Running Password OPA: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmpfjvhov7t.json', '{ "reasons": data.policies.security.password.deny, "trace": data.policies.common.inheritance.explain_config("password") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:58:09] "POST /api/test/password HTTP/1.1" 200 -
DEBUG: Running Password OPA: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmpxdv6e1t3.json', '{ "reasons": data.policies.security.password.deny, "trace": data.policies.common.inheritance.explain_config("password") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:58:12] "POST /api/test/password HTTP/1.1" 200 -
DEBUG: Running Password OPA: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmp1ojj44ty.json', '{ "reasons": data.policies.security.password.deny, "trace": data.policies.common.inheritance.explain_config("password") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:58:15] "POST /api/test/password HTTP/1.1" 200 -
DEBUG: Running Password OPA: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmp3eee3qwa.json', '{ "reasons": data.policies.security.password.deny, "trace": data.policies.common.inheritance.explain_config("password") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:58:18] "POST /api/test/password HTTP/1.1" 200 -
DEBUG: Starting OPA Eval for user_64587@org_1.com
DEBUG: Running command: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmpieyyyysc.json', '{ "allow": data.policies.apisix.policy.allow, "trace": data.policies.common.inheritance.explain_config_merged("access") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:58:25] "POST /api/test/access HTTP/1.1" 200 -
DEBUG: Starting OPA Eval for user_64587@org_1.com
DEBUG: Running command: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmpe7hz9bcs.json', '{ "allow": data.policies.apisix.policy.allow, "trace": data.policies.common.inheritance.explain_config_merged("access") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:58:32] "POST /api/test/access HTTP/1.1" 200 -
DEBUG: Starting OPA Eval for user_64587@org_1.com
DEBUG: Running command: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmp0emn4lg9.json', '{ "allow": data.policies.apisix.policy.allow, "trace": data.policies.common.inheritance.explain_config_merged("access") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:58:35] "POST /api/test/access HTTP/1.1" 200 -
DEBUG: Starting OPA Eval for user_64587@org_1.com
DEBUG: Running command: ['opa', 'eval', '-d', 'policies', '-d', 'data.json', '-i', '/tmp/tmpme3vx3v7.json', '{ "allow": data.policies.apisix.policy.allow, "trace": data.policies.common.inheritance.explain_config_merged("access") }'] in /home/gokul/oidc+apisix/python/opal_testing/policy_poc
127.0.0.1 - - [11/Dec/2025 16:58:37] "POST /api/test/access HTTP/1.1" 200 -
127.0.0.1 - - [11/Dec/2025 16:58:48] "GET /org/Org_1?page_users=2&page_groups=1 HTTP/1.1" 200 -
127.0.0.1 - - [11/Dec/2025 16:58:48] "GET /static/style.css HTTP/1.1" 304 -
127.0.0.1 - - [11/Dec/2025 16:59:15] "GET / HTTP/1.1" 200 -
127.0.0.1 - - [11/Dec/2025 16:59:15] "GET /static/style.css HTTP/1.1" 304 -
[2025-12-11 16:59:18,022] ERROR in app: Exception on /org/Org_2 [GET]
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/flask/app.py", line 2525, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/app.py", line 1822, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/app.py", line 1820, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/app.py", line 1796, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/gokul/oidc+apisix/python/opal_testing/policy_poc/policy_manager/app.py", line 64, in org_details
    return render_template("org_details.html",
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/templating.py", line 147, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/flask/templating.py", line 130, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/jinja2/environment.py", line 1301, in render
    self.environment.handle_exception()
  File "/usr/lib/python3/dist-packages/jinja2/environment.py", line 936, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/gokul/oidc+apisix/python/opal_testing/policy_poc/policy_manager/templates/org_details.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "/home/gokul/oidc+apisix/python/opal_testing/policy_poc/policy_manager/templates/base.html", line 82, in top-level template code
    {% block content %}{% endblock %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/gokul/oidc+apisix/python/opal_testing/policy_poc/policy_manager/templates/org_details.html", line 191, in block 'content'
    {% for rname, rconf in org.roles.items() %}
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/jinja2/environment.py", line 485, in getattr
    return getattr(obj, attribute)
           ^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'dict object' has no attribute 'roles'
127.0.0.1 - - [11/Dec/2025 16:59:18] "GET /org/Org_2 HTTP/1.1" 500 -
127.0.0.1 - - [11/Dec/2025 16:59:19] "GET /org/Org_1 HTTP/1.1" 200 -
127.0.0.1 - - [11/Dec/2025 16:59:19] "GET /static/style.css HTTP/1.1" 304 -
127.0.0.1 - - [11/Dec/2025 17:00:52] "GET /org/Org_1?page_users=2&page_groups=1 HTTP/1.1" 200 -
127.0.0.1 - - [11/Dec/2025 17:00:52] "GET /static/style.css HTTP/1.1" 304 -
